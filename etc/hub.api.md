## API Report File for "@textile/hub"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { ArchiveInfoResponse } from '@textile/buckets-grpc/buckets_pb';
import { ArchiveResponse } from '@textile/buckets-grpc/buckets_pb';
import { ArchiveStatusResponse } from '@textile/buckets-grpc/buckets_pb';
import { ArchiveWatchResponse } from '@textile/buckets-grpc/buckets_pb';
import CID from 'cids';
import { ContextInterface } from '@textile/context';
import { DeleteMessageResponse } from '@textile/users-grpc/users_pb';
import { DeleteMessageRequest } from '@textile/users-grpc/users_pb';
import { GetThreadResponse } from '@textile/users-grpc/users_pb';
import { GetThreadRequest } from '@textile/users-grpc/users_pb';
import { grpc } from '@improbable-eng/grpc-web';
import { GrpcConnection } from '@textile/grpc-connection';
import { Identity as Identity_2 } from '@textile/threads-core';
import { InitResponse } from '@textile/buckets-grpc/buckets_pb';
import { Libp2pCryptoIdentity } from '@textile/threads-core';
import { LinksResponse } from '@textile/buckets-grpc/buckets_pb';
import { ListInboxMessagesRequest } from '@textile/users-grpc/users_pb';
import { ListIpfsPathResponse } from '@textile/buckets-grpc/buckets_pb';
import { ListMessagesResponse } from '@textile/users-grpc/users_pb';
import { ListPathItem } from '@textile/buckets-grpc/buckets_pb';
import { ListPathResponse } from '@textile/buckets-grpc/buckets_pb';
import { ListResponse } from '@textile/buckets-grpc/buckets_pb';
import { ListSentboxMessagesRequest } from '@textile/users-grpc/users_pb';
import { ListThreadsResponse } from '@textile/users-grpc/users_pb';
import { ListThreadsRequest } from '@textile/users-grpc/users_pb';
import { name as name_2 } from 'multibase';
import * as pb from '@textile/threads-client-grpc/threads_pb';
import { PullIpfsPathResponse } from '@textile/buckets-grpc/buckets_pb';
import { PullPathResponse } from '@textile/buckets-grpc/buckets_pb';
import { PushPathResponse } from '@textile/buckets-grpc/buckets_pb';
import { ReadInboxMessageResponse } from '@textile/users-grpc/users_pb';
import { ReadInboxMessageRequest } from '@textile/users-grpc/users_pb';
import { ReadTransactionResponse } from '@textile/threads-client-grpc/threads_pb';
import { ReadTransactionRequest } from '@textile/threads-client-grpc/threads_pb';
import { RemovePathResponse } from '@textile/buckets-grpc/buckets_pb';
import { RemoveResponse } from '@textile/buckets-grpc/buckets_pb';
import { Root } from '@textile/buckets-grpc/buckets_pb';
import { RootResponse } from '@textile/buckets-grpc/buckets_pb';
import { SendMessageResponse } from '@textile/users-grpc/users_pb';
import { SendMessageRequest } from '@textile/users-grpc/users_pb';
import { SetPathResponse } from '@textile/buckets-grpc/buckets_pb';
import { SetupMailboxResponse } from '@textile/users-grpc/users_pb';
import { SetupMailboxRequest } from '@textile/users-grpc/users_pb';
import { WriteTransactionResponse } from '@textile/threads-client-grpc/threads_pb';
import { WriteTransactionRequest } from '@textile/threads-client-grpc/threads_pb';

// @public (undocumented)
export enum Action {
    // (undocumented)
    CREATE = 0,
    // (undocumented)
    DELETE = 2,
    // (undocumented)
    SAVE = 1
}

// @public
export type APISig = {
    sig: string;
    msg: string;
};

export { ArchiveInfoResponse }

export { ArchiveResponse }

export { ArchiveStatusResponse }

export { ArchiveWatchResponse }

// Warning: (ae-incompatible-release-tags) The symbol "Buckets" is marked as @public, but its signature references "GrpcAuthentication" which is marked as @internal
//
// @public
export class Buckets extends GrpcAuthentication {
    // @beta
    archive(key: string): Promise<void>;
    // @beta
    archiveInfo(key: string): Promise<ArchiveInfoResponse.AsObject>;
    // @beta
    archiveStatus(key: string): Promise<ArchiveStatusResponse.AsObject>;
    // @beta
    archiveWatch(key: string, callback: (reply?: {
        id: string | undefined;
        msg: string;
    }, err?: Error) => void): Promise<() => void>;
    static copyAuth(auth: GrpcAuthentication, debug?: boolean): Buckets;
    getOrInit(name: string, threadName?: string, isPrivate?: boolean, threadID?: string): Promise<{
        root?: RootObject;
        threadID?: string;
    }>;
    getToken(identity: Identity): Promise<string>;
    getTokenChallenge(publicKey: string, callback: (challenge: Uint8Array) => Uint8Array | Promise<Uint8Array>): Promise<string>;
    init(name: string, isPrivate?: boolean): Promise<InitObject>;
    links(key: string): Promise<LinksObject>;
    list(): Promise<RootObject[]>;
    listIpfsPath(path: string): Promise<ListPathItemObject | undefined>;
    listPath(key: string, path: string, depth?: number): Promise<ListPathObject>;
    listPathFlat(key: string, path: string, dirs?: boolean, depth?: number): Promise<Array<string>>;
    // @deprecated
    open(name: string, threadName?: string, isPrivate?: boolean, threadID?: string): Promise<{
        root?: RootObject;
        threadID?: string;
    }>;
    pullIpfsPath(path: string, opts?: {
        progress?: (num?: number) => void;
    }): AsyncIterableIterator<Uint8Array>;
    pullPath(key: string, path: string, opts?: {
        progress?: (num?: number) => void;
    }): AsyncIterableIterator<Uint8Array>;
    pushPath(key: string, path: string, input: any, opts?: {
        progress?: (num?: number) => void;
    }): Promise<PushPathResult>;
    remove(key: string): Promise<void>;
    removePath(key: string, path: string, root?: string): Promise<void>;
    root(key: string): Promise<RootObject | undefined>;
    static withKeyInfo(key: KeyInfo, host?: string, debug?: boolean): Promise<Buckets>;
    withThread(threadID?: string): this | undefined;
    static withUserAuth(auth: UserAuth | (() => Promise<UserAuth>), host?: string, debug?: boolean): Buckets;
}

// Warning: (ae-internal-missing-underscore) The name "bucketsArchive" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsArchive(api: GrpcConnection, key: string, ctx?: ContextInterface): Promise<void>;

// Warning: (ae-internal-missing-underscore) The name "bucketsArchiveInfo" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsArchiveInfo(api: GrpcConnection, key: string, ctx?: ContextInterface): Promise<ArchiveInfoResponse.AsObject>;

// Warning: (ae-internal-missing-underscore) The name "bucketsArchiveStatus" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsArchiveStatus(api: GrpcConnection, key: string, ctx?: ContextInterface): Promise<ArchiveStatusResponse.AsObject>;

// Warning: (ae-internal-missing-underscore) The name "bucketsArchiveWatch" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsArchiveWatch(api: GrpcConnection, key: string, callback: (reply?: {
    id: string | undefined;
    msg: string;
}, err?: Error) => void, ctx?: ContextInterface): Promise<() => void>;

// @public
export function bucketsInit(api: GrpcConnection, name: string, isPrivate?: boolean, ctx?: ContextInterface): Promise<InitObject>;

// Warning: (ae-internal-missing-underscore) The name "bucketsLinks" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsLinks(api: GrpcConnection, key: string, ctx?: ContextInterface): Promise<LinksObject>;

// Warning: (ae-internal-missing-underscore) The name "bucketsList" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsList(api: GrpcConnection, ctx?: ContextInterface): Promise<Array<RootObject>>;

// Warning: (ae-internal-missing-underscore) The name "bucketsListIpfsPath" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsListIpfsPath(api: GrpcConnection, path: string, ctx?: ContextInterface): Promise<ListPathItemObject | undefined>;

// Warning: (ae-internal-missing-underscore) The name "bucketsListPath" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsListPath(api: GrpcConnection, key: string, path: string, ctx?: ContextInterface): Promise<ListPathObject>;

// Warning: (ae-internal-missing-underscore) The name "bucketsPullIpfsPath" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsPullIpfsPath(api: GrpcConnection, path: string, opts?: {
    progress?: (num?: number) => void;
}, ctx?: ContextInterface): AsyncIterableIterator<Uint8Array>;

// Warning: (ae-internal-missing-underscore) The name "bucketsPullPath" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsPullPath(api: GrpcConnection, key: string, path: string, opts?: {
    progress?: (num?: number) => void;
}, ctx?: ContextInterface): AsyncIterableIterator<Uint8Array>;

// Warning: (ae-internal-missing-underscore) The name "bucketsPushPath" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsPushPath(api: GrpcConnection, key: string, path: string, input: any, opts?: {
    progress?: (num?: number) => void;
}, ctx?: ContextInterface): Promise<PushPathResult>;

// Warning: (ae-internal-missing-underscore) The name "bucketsRemove" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsRemove(api: GrpcConnection, key: string, ctx?: ContextInterface): Promise<void>;

// Warning: (ae-internal-missing-underscore) The name "bucketsRemovePath" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsRemovePath(api: GrpcConnection, key: string, path: string, root?: string, ctx?: ContextInterface): Promise<void>;

// Warning: (ae-internal-missing-underscore) The name "bucketsRoot" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function bucketsRoot(api: GrpcConnection, key: string, ctx?: ContextInterface): Promise<RootObject | undefined>;

// @public
export function bytesToArray(chunk: Uint8Array, size?: number): Uint8Array[];

// @public
export class Client {
    constructor(context?: ContextInterface, debug?: boolean);
    // (undocumented)
    context: ContextInterface;
    create(threadID: ThreadID, collectionName: string, values: any[]): Promise<string[]>;
    delete(threadID: ThreadID, collectionName: string, IDs: string[]): Promise<void>;
    deleteCollection(threadID: ThreadID, name: string): Promise<void>;
    deleteDB(threadID: ThreadID): Promise<void>;
    // Warning: (ae-forgotten-export) The symbol "InstanceList" needs to be exported by the entry point index.d.ts
    find<T = any>(threadID: ThreadID, collectionName: string, query: QueryJSON): Promise<InstanceList<T>>;
    findByID<T = any>(threadID: ThreadID, collectionName: string, ID: string): Promise<Instance<T>>;
    getCollectionIndexes(threadID: ThreadID, name: string): Promise<pb.Index.AsObject[]>;
    getDBInfo(threadID: ThreadID): Promise<DBInfo>;
    getToken(identity: Identity_2, ctx?: ContextInterface): Promise<string>;
    getTokenChallenge(publicKey: string, callback: (challenge: Uint8Array) => Uint8Array | Promise<Uint8Array>, ctx?: ContextInterface): Promise<string>;
    has(threadID: ThreadID, collectionName: string, IDs: string[]): Promise<boolean>;
    joinFromInfo(info: DBInfo, includeLocal?: boolean, collections?: Array<{
        name: string;
        schema: any;
    }>): Promise<void>;
    listDBs(): Promise<Record<string, pb.GetDBInfoResponse.AsObject | undefined>>;
    // Warning: (ae-forgotten-export) The symbol "Filter" needs to be exported by the entry point index.d.ts
    listen<T = any>(threadID: ThreadID, filters: Filter[], callback: (reply?: Update<T>, err?: Error) => void): grpc.Request;
    newCollection(threadID: ThreadID, name: string, schema: any, indexes?: pb.Index.AsObject[]): Promise<void>;
    newCollectionFromObject(threadID: ThreadID, name: string, obj: any, indexes?: pb.Index.AsObject[]): Promise<void>;
    newDB(threadID?: ThreadID, name?: string): Promise<ThreadID>;
    newDBFromAddr(address: string, key: string | Uint8Array, collections?: Array<{
        name: string;
        schema: any;
    }>): Promise<void>;
    open(threadID: ThreadID, name?: string): Promise<void>;
    // @deprecated
    static randomIdentity(): Promise<Libp2pCryptoIdentity>;
    readTransaction(threadID: ThreadID, collectionName: string): ReadTransaction;
    // (undocumented)
    rpcOptions: grpc.RpcOptions;
    save(threadID: ThreadID, collectionName: string, values: any[]): Promise<void>;
    // (undocumented)
    serviceHost: string;
    updateCollection(threadID: ThreadID, name: string, schema: any, indexes?: pb.Index.AsObject[]): Promise<void>;
    static withKeyInfo(key: KeyInfo, host?: string, debug?: boolean): Promise<Client>;
    static withUserAuth(auth: UserAuth | (() => Promise<UserAuth>), host?: string, debug?: boolean): Client;
    writeTransaction(threadID: ThreadID, collectionName: string): WriteTransaction;
}

// @public
export function createAPISig(secret: string, date?: Date): Promise<APISig>;

// @public
export function createUserAuth(key: string, secret: string, date?: Date, token?: string): Promise<UserAuth>;

// @public
export interface DBInfo {
    addrs: string[];
    key: string;
}

// @public
export function decrypt(ciphertext: Uint8Array, privKey: Uint8Array, type?: string): Promise<Uint8Array>;

// Warning: (ae-internal-missing-underscore) The name "deleteInboxMessage" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function deleteInboxMessage(api: GrpcConnection, id: string, ctx?: ContextInterface): Promise<void>;

export { DeleteMessageResponse }

export { DeleteMessageRequest }

// Warning: (ae-internal-missing-underscore) The name "deleteSentboxMessage" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function deleteSentboxMessage(api: GrpcConnection, id: string, ctx?: ContextInterface): Promise<void>;

// @public
export function encrypt(data: Uint8Array, pubKey: Uint8Array, type?: string): Promise<Uint8Array>;

// @public
export const expirationError: Error;

// @public
export function extractPublicKeyBytes(key: Public): Uint8Array;

// Warning: (ae-internal-missing-underscore) The name "getMailboxID" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function getMailboxID(api: GrpcConnection, ctx?: ContextInterface): Promise<string>;

// Warning: (ae-internal-missing-underscore) The name "getThread" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function getThread(api: GrpcConnection, name: string, ctx?: ContextInterface): Promise<GetThreadResponseObj>;

export { GetThreadResponse }

// @public
export interface GetThreadResponseObj {
    // (undocumented)
    id: string;
    // (undocumented)
    isDB: boolean;
    // (undocumented)
    name: string;
}

export { GetThreadRequest }

// Warning: (ae-internal-missing-underscore) The name "GrpcAuthentication" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export class GrpcAuthentication extends GrpcConnection {
    static copyAuth(auth: GrpcAuthentication, debug?: boolean): GrpcAuthentication;
    getToken(identity: Identity): Promise<string>;
    getTokenChallenge(publicKey: string, callback: (challenge: Uint8Array) => Uint8Array | Promise<Uint8Array>): Promise<string>;
    static withKeyInfo(key: KeyInfo, host?: string, debug?: boolean): Promise<GrpcAuthentication>;
    withThread(threadID?: string): this | undefined;
    static withUserAuth(auth: UserAuth | (() => Promise<UserAuth>), host?: string, debug?: boolean): GrpcAuthentication;
}

// @public
export interface Identity {
    public: Public;
    sign(data: Uint8Array): Promise<Uint8Array>;
}

// @public
export interface InboxListOptions {
    // (undocumented)
    ascending?: boolean;
    // (undocumented)
    limit?: number;
    // (undocumented)
    seek?: string;
    // (undocumented)
    status?: Status;
}

// @public
export type InitObject = {
    seed: Uint8Array;
    seedCid: string;
    root?: RootObject;
    links?: LinksObject;
};

export { InitResponse }

// @public
export interface Instance<T> {
    // (undocumented)
    instance: T | undefined;
}

// @public
export type KeyInfo = {
    key: string;
    secret?: string;
};

// @public
export type LinksObject = {
    www: string;
    ipns: string;
    url: string;
};

export { LinksResponse }

// Warning: (ae-internal-missing-underscore) The name "listInboxMessages" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function listInboxMessages(api: GrpcConnection, opts?: InboxListOptions, ctx?: ContextInterface): Promise<Array<UserMessage>>;

export { ListInboxMessagesRequest }

export { ListIpfsPathResponse }

export { ListMessagesResponse }

// @public
export function listPathFlat(grpc: GrpcConnection, bucketKey: string, path: string, dirs: boolean, depth: number): Promise<Array<string>>;

export { ListPathItem }

// @public
export type ListPathItemObject = {
    cid: string;
    name: string;
    path: string;
    size: number;
    isDir: boolean;
    itemsList: Array<ListPathItemObject>;
};

// @public
export type ListPathObject = {
    item?: ListPathItemObject;
    root?: RootObject;
};

// @public
export function listPathRecursive(grpc: GrpcConnection, bucketKey: string, path: string, depth: number, currentDepth?: number): Promise<ListPathObject>;

export { ListPathResponse }

export { ListResponse }

// Warning: (ae-internal-missing-underscore) The name "listSentboxMessages" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function listSentboxMessages(api: GrpcConnection, opts?: SentboxListOptions, ctx?: ContextInterface): Promise<Array<UserMessage>>;

export { ListSentboxMessagesRequest }

// Warning: (ae-internal-missing-underscore) The name "listThreads" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function listThreads(api: GrpcConnection, ctx?: ContextInterface): Promise<Array<GetThreadResponseObj>>;

export { ListThreadsResponse }

export { ListThreadsRequest }

// @public
export interface MailboxEvent {
    // (undocumented)
    message?: UserMessage;
    // (undocumented)
    messageID: string;
    // (undocumented)
    type: MailboxEventType;
}

// @public
export enum MailboxEventType {
    // (undocumented)
    CREATE = 0,
    // (undocumented)
    DELETE = 2,
    // (undocumented)
    SAVE = 1
}

// @public
export const MailConfig: {
    ThreadName: string;
    InboxCollectionName: string;
    SentboxCollectionName: string;
};

// @public
export type Private = Identity;

// @public
export class PrivateKey implements Private {
    constructor(secretKey: Uint8Array, type?: string);
    get bytes(): Uint8Array;
    canSign(): boolean;
    decrypt(ciphertext: Uint8Array): Promise<Uint8Array>;
    static fromRandom(): PrivateKey;
    static fromRawEd25519Seed(rawSeed: Uint8Array): PrivateKey;
    static fromString(str: string): PrivateKey;
    privKey: Uint8Array;
    pubKey: Uint8Array;
    get public(): PublicKey;
    seed: Uint8Array;
    sign(data: Uint8Array): Promise<Uint8Array>;
    toString(): string;
    // (undocumented)
    type: string;
}

// @public
export function privateKeyFromString(str: string): Uint8Array;

// @public
export interface Public {
    bytes: Uint8Array;
    verify(data: Uint8Array, sig: Uint8Array): Promise<boolean>;
}

// @public
export class PublicKey implements Public {
    constructor(pubKey: Uint8Array, type?: string);
    get bytes(): Uint8Array;
    encrypt(data: Uint8Array): Promise<Uint8Array>;
    static fromString(str: string): PublicKey;
    // (undocumented)
    pubKey: Uint8Array;
    toString(): string;
    // (undocumented)
    type: string;
    verify(data: Uint8Array, signature: Uint8Array): Promise<boolean>;
}

// @public
export function publicKeyBytesFromString(str: string): Uint8Array;

// @public
export function publicKeyBytesToString(bytes: Uint8Array): string;

// @public
export function publicKeyToString(key: Public): string;

export { PullIpfsPathResponse }

export { PullPathResponse }

export { PushPathResponse }

// @public
export interface PushPathResult {
    // (undocumented)
    path: {
        path: string;
        cid: CID;
        root: CID;
        remainder: string;
    };
    // (undocumented)
    root: string;
}

// @public
export class Query implements QueryJSON {
    constructor(ands?: CriterionJSON[], ors?: QueryJSON[], sort?: SortJSON | undefined);
    and(fieldPath: string): Criterion;
    // Warning: (ae-forgotten-export) The symbol "CriterionJSON" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    ands: CriterionJSON[];
    or(query: Query): Query;
    orderBy(fieldPath: string): Query;
    orderByDesc(fieldPath: string): Query;
    // (undocumented)
    ors: QueryJSON[];
    // Warning: (ae-forgotten-export) The symbol "SortJSON" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    sort?: SortJSON | undefined;
    // Warning: (ae-forgotten-export) The symbol "Criterion" needs to be exported by the entry point index.d.ts
    static where(fieldPath: string): Criterion;
}

// @public
export interface QueryJSON {
    // (undocumented)
    ands?: CriterionJSON[];
    // (undocumented)
    ors?: QueryJSON[];
    // (undocumented)
    sort?: SortJSON;
}

// Warning: (ae-internal-missing-underscore) The name "readInboxMessage" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function readInboxMessage(api: GrpcConnection, id: string, ctx?: ContextInterface): Promise<{
    readAt: number;
}>;

export { ReadInboxMessageResponse }

export { ReadInboxMessageRequest }

// Warning: (ae-forgotten-export) The symbol "Transaction" needs to be exported by the entry point index.d.ts
//
// @public
export class ReadTransaction extends Transaction<ReadTransactionRequest, ReadTransactionResponse> {
    constructor(context: ContextInterface, client: grpc.Client<ReadTransactionRequest, ReadTransactionResponse>, threadID: ThreadID, modelName: string);
    // (undocumented)
    protected readonly client: grpc.Client<ReadTransactionRequest, ReadTransactionResponse>;
    // (undocumented)
    protected readonly context: ContextInterface;
    find<T = any>(query: QueryJSON): Promise<InstanceList<T>>;
    findByID<T = any>(ID: string): Promise<Instance<T>>;
    has(IDs: string[]): Promise<boolean>;
    // (undocumented)
    protected readonly modelName: string;
    start(): Promise<void>;
    // (undocumented)
    protected readonly threadID: ThreadID;
}

export { RemovePathResponse }

export { RemoveResponse }

export { Root }

// @public
export type RootObject = {
    key: string;
    name: string;
    path: string;
    createdAt: number;
    updatedAt: number;
    thread: string;
};

export { RootResponse }

// Warning: (ae-internal-missing-underscore) The name "sendMessage" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function sendMessage(api: GrpcConnection, from: string, to: string, toBody: Uint8Array, toSignature: Uint8Array, fromBody: Uint8Array, fromSignature: Uint8Array, ctx?: ContextInterface): Promise<UserMessage>;

export { SendMessageResponse }

export { SendMessageRequest }

// @public
export interface SentboxListOptions {
    // (undocumented)
    ascending?: boolean;
    // (undocumented)
    limit?: number;
    // (undocumented)
    seek?: string;
}

export { SetPathResponse }

// Warning: (ae-internal-missing-underscore) The name "setupMailbox" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function setupMailbox(api: GrpcConnection, ctx?: ContextInterface): Promise<string>;

export { SetupMailboxResponse }

export { SetupMailboxRequest }

// @public
export enum Status {
    // (undocumented)
    ALL = 0,
    // (undocumented)
    READ = 1,
    // (undocumented)
    UNREAD = 2
}

// @public
export class ThreadID {
    constructor(buf: Uint8Array);
    // (undocumented)
    readonly buf: Buffer;
    equals(o: ThreadID): boolean;
    static fromBytes(data: Uint8Array): ThreadID;
    static fromRandom(variant?: Variant, size?: number): ThreadID;
    static fromString(v: string | Uint8Array): ThreadID;
    static getEncoding(v: string): string;
    isDefined(): boolean;
    toBytes(): Buffer;
    toString(base?: name_2): string;
    static V1: number;
    // (undocumented)
    static Variant: typeof Variant;
    variant(): number;
    version(): number;
}

// @public (undocumented)
export interface Update<T = any> extends Instance<T> {
    // (undocumented)
    action: Action;
    // (undocumented)
    collectionName: string;
    // (undocumented)
    instanceID: string;
}

// @public
export type UserAuth = {
    key: string;
    sig: string;
    msg: string;
    token?: string;
};

// @public
export interface UserMessage {
    // (undocumented)
    body: Uint8Array;
    // (undocumented)
    createdAt: number;
    // (undocumented)
    from: string;
    // (undocumented)
    id: string;
    // (undocumented)
    readAt?: number;
    // (undocumented)
    signature: Uint8Array;
    // (undocumented)
    to: string;
}

// Warning: (ae-incompatible-release-tags) The symbol "Users" is marked as @public, but its signature references "GrpcAuthentication" which is marked as @internal
//
// @public
export class Users extends GrpcAuthentication {
    static copyAuth(auth: GrpcAuthentication, debug?: boolean): Users;
    deleteInboxMessage(id: string): Promise<void>;
    deleteSentboxMessage(id: string): Promise<void>;
    getMailboxID(): Promise<string>;
    getThread(name: string): Promise<GetThreadResponseObj>;
    getToken(identity: Identity): Promise<string>;
    getTokenChallenge(publicKey: string, callback: (challenge: Uint8Array) => Uint8Array | Promise<Uint8Array>): Promise<string>;
    listInboxMessages(opts?: InboxListOptions): Promise<Array<UserMessage>>;
    listSentboxMessages(opts?: SentboxListOptions): Promise<Array<UserMessage>>;
    listThreads(): Promise<Array<GetThreadResponseObj>>;
    readInboxMessage(id: string): Promise<{
        readAt: number;
    }>;
    sendMessage(from: Identity, to: Public, body: Uint8Array): Promise<UserMessage>;
    setupMailbox(): Promise<string>;
    watchInbox(id: string, callback: (reply?: MailboxEvent, err?: Error) => void): grpc.Request;
    watchSentbox(id: string, callback: (reply?: MailboxEvent, err?: Error) => void): grpc.Request;
    static withKeyInfo(key: KeyInfo, host?: string, debug?: boolean): Promise<Users>;
    withThread(threadID?: string): this | undefined;
    static withUserAuth(auth: UserAuth | (() => Promise<UserAuth>), host?: string, debug?: boolean): Users;
}

// @public
export enum Variant {
    // (undocumented)
    AccessControlled = 112,
    // (undocumented)
    Raw = 85
}

// Warning: (ae-internal-missing-underscore) The name "watchMailbox" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function watchMailbox(api: GrpcConnection, id: string, box: 'inbox' | 'sentbox', callback: (reply?: MailboxEvent, err?: Error) => void, ctx?: ContextInterface): grpc.Request;

// @public
export const Where: typeof Criterion;

// @public
export class WriteTransaction extends Transaction<WriteTransactionRequest, WriteTransactionResponse> {
    constructor(context: ContextInterface, client: grpc.Client<WriteTransactionRequest, WriteTransactionResponse>, threadID: ThreadID, modelName: string);
    // (undocumented)
    protected readonly client: grpc.Client<WriteTransactionRequest, WriteTransactionResponse>;
    // (undocumented)
    protected readonly context: ContextInterface;
    create<T = any>(values: any[]): Promise<string[] | undefined>;
    delete(IDs: string[]): Promise<void>;
    find<T = any>(query: QueryJSON): Promise<InstanceList<T>>;
    findByID<T = any>(ID: string): Promise<Instance<T> | undefined>;
    has(IDs: string[]): Promise<boolean>;
    // (undocumented)
    protected readonly modelName: string;
    save(values: any[]): Promise<void>;
    start(): Promise<void>;
    // (undocumented)
    protected readonly threadID: ThreadID;
}


```
