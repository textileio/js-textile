<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Client class · Hub JS Package</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;!-- Do not edit this file. It is automatically generated by API Documenter. --&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Client class · Hub JS Package"/><meta property="og:type" content="website"/><meta property="og:url" content="https://textileio.github.io/js-hub/"/><meta property="og:description" content="&lt;!-- Do not edit this file. It is automatically generated by API Documenter. --&gt;"/><meta property="og:image" content="https://textileio.github.io/js-hub/img/hex.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://textileio.github.io/js-hub/img/hex.svg"/><link rel="shortcut icon" href="/js-hub/img/hex.svg"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900italic,900"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script src="/js-hub/js/scrollSpy.js"></script><link rel="stylesheet" href="/js-hub/css/prism.css"/><link rel="stylesheet" href="/js-hub/css/main.css"/><script src="/js-hub/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/js-hub/"><img class="logo" src="/js-hub/img/hex.svg" alt="Hub JS Package"/><h2 class="headerTitleWithLogo">Hub JS Package</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/js-hub/docs/hub.users" target="_self">Users</a></li><li class="siteNavGroupActive"><a href="/js-hub/docs/hub.buckets" target="_self">Buckets</a></li><li class="siteNavGroupActive siteNavItemActive"><a href="/js-hub/docs/hub.client" target="_self">Threads</a></li><li class=""><a href="https://docs.textile.io" target="_self">Textile Docs</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Threads</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/js-hub/docs/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/js-hub/docs/hub">Package Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Users API</h3><ul class=""><li class="navListItem"><a class="navItem" href="/js-hub/docs/hub.users">Users class</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Buckets</h3><ul class=""><li class="navListItem"><a class="navItem" href="/js-hub/docs/hub.buckets">Buckets class</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Threads</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/js-hub/docs/hub.client">Client class</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Filecoin</h3><ul class=""><li class="navListItem"><a class="navItem" href="/js-hub/docs/hub.pow">Pow class</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Common Methods &amp; Classes</h3><ul class=""><li class="navListItem"><a class="navItem" href="/js-hub/docs/hub.threadid">ThreadID class</a></li><li class="navListItem"><a class="navItem" href="/js-hub/docs/hub.createuserauth">createUserAuth() function</a></li><li class="navListItem"><a class="navItem" href="/js-hub/docs/hub.createapisig">createAPISig() function</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><!-- Do not edit this file. It is automatically generated by API Documenter. -->
<p><a href="/js-hub/docs/hub">@textile/hub</a> &gt; <a href="/js-hub/docs/hub.client">Client</a></p>
<h2><a class="anchor" aria-hidden="true" id="client-class"></a><a href="#client-class" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Client class</h2>
<p>Client is a web-gRPC wrapper client for communicating with a webgRPC-enabled Threads server. This client library can be used to interact with a local or remote Textile gRPC-service It is a wrapper around Textile Thread's 'DB' API, which is defined here: <a href="https://github.com/textileio/go-threads/blob/master/api/pb/api.proto">https://github.com/textileio/go-threads/blob/master/api/pb/api.proto</a>.</p>
<p><b>Signature:</b></p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">export</span> declare <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> 
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">import</span> {Client, Identity, UserAuth} <span class="hljs-keyword">from</span> <span class="hljs-string">'@textile/hub'</span>

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setupDB</span>(<span class="hljs-params">auth: UserAuth, identity: Identity</span>) </span>{
  <span class="hljs-comment">// Initialize the client</span>
  <span class="hljs-keyword">const</span> client = Client.withUserAuth(auth)

  <span class="hljs-comment">// Connect the user to your API</span>
  <span class="hljs-keyword">const</span> userToken = <span class="hljs-keyword">await</span> client.getToken(identity)

  <span class="hljs-comment">// Create a new DB</span>
  <span class="hljs-keyword">const</span> threadID = <span class="hljs-keyword">await</span> client.newDB(<span class="hljs-literal">undefined</span>, <span class="hljs-string">'nasa'</span>)

  <span class="hljs-comment">// Create a new Collection from an Object</span>
  <span class="hljs-keyword">const</span> buzz = {
    name: <span class="hljs-string">'Buzz'</span>,
    missions: <span class="hljs-number">2</span>,
    _id: <span class="hljs-string">''</span>,
  }
  <span class="hljs-keyword">await</span> client.newCollectionFromObject(threadID, <span class="hljs-string">'astronauts'</span>, buzz)

  <span class="hljs-comment">// Store the buzz object in the new collection</span>
  <span class="hljs-keyword">await</span> client.create(threadID, <span class="hljs-string">'astronauts'</span>, [buzz])

  <span class="hljs-keyword">return</span> threadID
}

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="constructors"></a><a href="#constructors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Constructors</h2>
<table>
<thead>
<tr><th>Constructor</th><th>Modifiers</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="/js-hub/docs/hub.client._constructor_">(constructor)(context, debug)</a></td><td></td><td>Creates a new gRPC client instance for accessing the Textile Threads API.</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="properties"></a><a href="#properties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Properties</h2>
<table>
<thead>
<tr><th>Property</th><th>Modifiers</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="/js-hub/docs/hub.client.context">context</a></td><td></td><td>ContextInterface</td><td></td></tr>
<tr><td><a href="/js-hub/docs/hub.client.rpcoptions">rpcOptions</a></td><td></td><td>grpc.RpcOptions</td><td></td></tr>
<tr><td><a href="/js-hub/docs/hub.client.servicehost">serviceHost</a></td><td></td><td>string</td><td></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="methods"></a><a href="#methods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Methods</h2>
<table>
<thead>
<tr><th>Method</th><th>Modifiers</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="/js-hub/docs/hub.client.create">create(threadID, collectionName, values)</a></td><td></td><td>Creates a new model instance in the given store.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.delete">delete(threadID, collectionName, IDs)</a></td><td></td><td>Deletes an existing model instance from the given store.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.deletecollection">deleteCollection(threadID, name)</a></td><td></td><td>Deletes an existing collection.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.deletedb">deleteDB(threadID)</a></td><td></td><td>Deletes an entire DB.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.find">find(threadID, collectionName, query)</a></td><td></td><td>Queries a collection for entities matching the given query parameters.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.findbyid">findByID(threadID, collectionName, ID)</a></td><td></td><td>Queries the collection by a known instance ID.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.getcollectionindexes">getCollectionIndexes(threadID, name)</a></td><td></td><td>Returns an existing indexes for a collection.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.getcollectioninfo">getCollectionInfo(threadID, name)</a></td><td></td><td></td></tr>
<tr><td><a href="/js-hub/docs/hub.client.getdbinfo">getDBInfo(threadID)</a></td><td></td><td>Returns a DBInfo objection containing metadata required to invite other peers to join a given thread.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.gettoken">getToken(identity, ctx)</a></td><td></td><td>Obtain a token per user (identity) for interacting with the remote API.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.gettokenchallenge">getTokenChallenge(publicKey, callback, ctx)</a></td><td></td><td>Obtain a token per user (identity) for interacting with the remote API.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.has">has(threadID, collectionName, IDs)</a></td><td></td><td>Check if a given instance exists in the collection.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.joinfrominfo">joinFromInfo(info, includeLocal, collections)</a></td><td></td><td>Connect client to an existing database using information in the DBInfo object This should be called before any operation on the store, and is an alternative to open, which re-opens a database already opened by the user.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.listcollections">listCollections(thread)</a></td><td></td><td>Lists the collections in a thread</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.listdbs">listDBs()</a></td><td></td><td>Lists all known DBs.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.listen">listen(threadID, filters, callback)</a></td><td></td><td>listen opens a long-lived connection with a remote node, running the given callback on each new update to the given instance. The return value is a <code>close</code> function, which cleanly closes the connection with the remote node.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.newcollection">newCollection(threadID, name, schema, indexes)</a></td><td></td><td>newCollection registers a new collection schema under the given name. The schema must be a valid json-schema.org schema, and can be a JSON string or object.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.newcollectionfromobject">newCollectionFromObject(threadID, name, obj, indexes)</a></td><td></td><td>newCollectionFromObject creates and registers a new collection under the given name. The input object must be serializable to JSON, and contain only json-schema.org types.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.newdb">newDB(threadID, name)</a></td><td></td><td>newDB creates a new store on the remote node.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.newdbfromaddr">newDBFromAddr(address, key, collections)</a></td><td></td><td>newDBFromAddr initializes the client with the given store, connecting to the given thread address (database). It should be called before any operation on the store, and is an alternative to start, which creates a local store. newDBFromAddr should also include the read/follow key, which should be a Buffer, Uint8Array or base32-encoded string.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.open">open(threadID, name)</a></td><td></td><td>open creates and enters a new store on the remote node.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.randomidentity">randomIdentity()</a></td><td><code>static</code></td><td>Create a random user identity.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.readtransaction">readTransaction(threadID, collectionName)</a></td><td></td><td>readTransaction creates a new read-only transaction object. See ReadTransaction for details.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.save">save(threadID, collectionName, values)</a></td><td></td><td>Saves changes to an existing model instance in the given store.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.updatecollection">updateCollection(threadID, name, schema, indexes)</a></td><td></td><td>updateCollection updates an existing collection. Currently, updates can include name and schema.  Allow update of indexing information.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.withkeyinfo">withKeyInfo(key, host, debug)</a></td><td><code>static</code></td><td>Create a new gRPC client instance from a supplied key and secret</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.withuserauth">withUserAuth(auth, host, debug)</a></td><td><code>static</code></td><td>Create a new gRPC client instance from a supplied user auth object. Assumes all default gRPC settlings. For customization options, use a context object directly. The callback method will automatically refresh expiring credentials.</td></tr>
<tr><td><a href="/js-hub/docs/hub.client.writetransaction">writeTransaction(threadID, collectionName)</a></td><td></td><td>writeTransaction creates a new writeable transaction object. See WriteTransaction for details.</td></tr>
</tbody>
</table>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/js-hub/docs/hub.buckets"><span class="arrow-prev">← </span><span>Buckets class</span></a><a class="docs-next button" href="/js-hub/docs/hub.pow"><span>Pow class</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#client-class">Client class</a></li><li><a href="#example">Example</a></li><li><a href="#constructors">Constructors</a></li><li><a href="#properties">Properties</a></li><li><a href="#methods">Methods</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/js-hub/" class="nav-home"><img src="/js-hub/img/hex.svg" alt="Hub JS Package" width="66" height="58"/></a><div><h5>Docs</h5><a href="/js-hub/docs/index">Getting Started</a><a href="/js-hub/docs/hub.client">ThreadDB</a><a href="/js-hub/docs/hub.buckets">Buckets</a></div><div><h5>Resources</h5><a href="https://docs.textile.io/" target="_blank" rel="noreferrer noopener">All Documentation</a><a href="https://slack.textile.io/" target="_blank" rel="noreferrer noopener">Project Slack</a><a href="https://blog.textile.io/" target="_blank" rel="noreferrer noopener">Blog</a></div><div><h5>More</h5><a href="https://github.com/textileio">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/textileio/js-threads/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><div class="social"><a href="https://twitter.com/textileio" class="twitter-follow-button">Follow @textileio</a></div></div></section></footer></div><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script></body></html>